<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  </head>
  <style>
* {
    padding: 0;
    margin: 0;
}

/* GENERAL */

/* Scrollbars */
::-webkit-scrollbar {
    width: 12px; /* width of the entire scrollbar */
}

::-webkit-scrollbar-track {
    background: #5c5d5e; /* color of the tracking area */
}

::-webkit-scrollbar-thumb {
    background-color: #3c3d3e; /* color of the scroll thumb */
    border-radius: 20px; /* roundness of the scroll thumb */
    border: 3px solid #5c5d5e; /* creates padding around scroll thumb */
}

*,
::after,
::before {
    box-sizing: border-box;
}

html {
    width: 100%;
    height: 100%;
    -ms-overflow-style: -ms-autohiding-scrollbar;
    -webkit-text-size-adjust: 100%;
}

body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, sans-serif;
    overflow: hidden; /* Prevent scrolling */
    background-color: black;
    user-select: none; /* Standard syntax */
    -webkit-user-select: none; /* Safari and older iOS */
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none;
    position: fixed; /* Prevent body from moving */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

canvas {
    display: block;
    position: absolute;
    width: 100% !important;
    height: 100% !important;
    top: 0;
    left: 0;
    margin: 0;
    padding: 0;
    touch-action: manipulation; /* Improve touch handling */
    -webkit-tap-highlight-color: transparent;
}

/* Hide desktop / mobiles only sections */
.mobile .desktop-only {
    display: none !important;
}

.desktop .mobile-only {
    display: none !important;
}
.landscape-only {
    @media (orientation: portrait) {
        display: none !important;
    }
}
.portrait-only {
    @media (orientation: landscape) {
        display: none !important;
    }
}

/* no select */
.noselect {
    -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
    -khtml-user-select: none; /* Konqueror HTML */
    -moz-user-select: none; /* Old versions of Firefox */
    -ms-user-select: none; /* Internet Explorer/Edge */
    user-select: none; /* Non-prefixed version, currently
                                    supported by Chrome, Edge, Opera and Firefox */
}

.hidden {
    display: none !important;
}

/* Fullscreen gesture overlay */
#fullscreen-gesture {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1000;
    pointer-events: all;
}

.fullscreen-gesture {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1001;
    display: flex;
    justify-content: center;
    align-items: center;
}

.fullscreen-gesture.hidden {
    display: none;
}

.gesture-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
}

.full-screen-hand {
    width: 114px;
    height: 112px;
    margin-bottom: 20px;
    animation-name: fullscreen-swipe;
    animation-duration: 1.8s;
    animation-iteration-count: infinite;
    -webkit-animation-name: fullscreen-swipe;
    -webkit-animation-duration: 1.8s;
    -webkit-animation-iteration-count: infinite;
}

.swipe-text {
    font-size: 24px;
    font-weight: bold;
    color: #E8E8E8;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.swipe-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 1002;
    color: white;
    font-family: Arial, sans-serif;
    width: 80%;
    max-width: 300px;
}

.swipe-icon {
    width: 60px;
    height: 60px;
    border: 2px solid white;
    border-radius: 50%;
    position: relative;
    margin-bottom: 20px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M7 14l5-5 5 5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 40px;
    animation: pulse 2s infinite;
}

.swipe-text {
    font-size: 18px;
    margin-bottom: 15px;
    text-align: center;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
}

.swipe-arrow {
    width: 30px;
    height: 50px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M7 14l5-5 5 5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    animation: swipeUp 1.5s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.8; }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes swipeUp {
    0% { transform: translateY(0); opacity: 0.5; }
    50% { transform: translateY(-15px); opacity: 1; }
    100% { transform: translateY(0); opacity: 0.5; }
}
.consoleHidden {
    display: none;
}

.stretch-width {
    width: 100vw;
}

.stretch-height {
    height: 100vh;
}

.button {
    border: none;
    background-color: transparent;
    padding: 0;
    color: inherit;
    text-align: inherit;
    font-size: 100%;
    font-family: inherit;
    line-height: inherit;
    align-items: flex-start;
    box-sizing: border-box;
    text-rendering: auto;
    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0;
    text-shadow: none;
    display: inline-block;
    margin: 0;
    cursor: pointer;
    -webkit-writing-mode: horizontal-tb;
    writing-mode: horizontal-tb;
    -webkit-appearance: button;
    appearance: button;
}

.button:focus .button {
    outline: 0;
}

.media-info {
    position: fixed;
    bottom: 4%;
    left: 5px;
    background: rgba(28, 28, 28, 0.8);
    border-radius: 4px;
    color: #fff;
    z-index: 50;
    min-width: 20em;
    font-family: Verdana, Helvetica, sans-serif;
    text-align: left;
    direction: ltr;
    font-size: 9px;
    line-height: 1.3;
    -webkit-font-smoothing: antialiased;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
.media-info-close-button {
    position: absolute;
    right: 5px;
    top: 5px;
}

.perf-info {
    position: fixed;
    top: 5px;
    left: 5px;
    background: rgba(28, 28, 28, 0.8);
    border-radius: 4px;
    color: #fff;
    z-index: 50;
    min-width: 11em;
    font-family: Verdana, Helvetica, sans-serif;
    text-align: left;
    direction: ltr;
    font-size: 11px;
    line-height: 1.3;
    -webkit-font-smoothing: antialiased;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

#iOSFullscreen {
    width: 100vw;
    height: 135vh;
    position: absolute;
    z-index: 999;
    top: 0;
    left: 0;
}

#iOSFullscreenAnimation {
    width: 100vw;
    height: 100vh;
    background: #0000007f;
    position: fixed;
    z-index: 99;
}

.full-screen-hand {
    width: 114px;
    height: 112px;
    top: 50vh;
    left: 50vw;
    position: fixed;
    z-index: 110;
    transform: translate(-50%, -50%);
    animation-name: fullscreen-swipe;
    animation-duration: 1.8s;
    animation-iteration-count: infinite;
    -webkit-animation-name: fullscreen-swipe;
    -webkit-animation-duration: 1.8s;
    -webkit-animation-iteration-count: infinite;
}

@keyframes fullscreen-swipe {
    from {
        top: 80%;
    }

    to {
        top: 40%;
    }
}

@-webkit-keyframes fullscreen-swipe {
    from {
        top: 80%;
    }

    to {
        top: 40%;
    }
}

  </style>
  <body>
    <canvas id="game-canvas"></canvas>
    
    <!-- Fullscreen swipe gesture overlay -->
    <div id="fullscreen-gesture" class="fullscreen-gesture">
      <div class="gesture-container">
        <div class="swipe-icon">
          <svg class="full-screen-hand" viewBox="0 0 114 112">
            <g id="Artboard" transform="translate(-43.000000, -44.000000)" fill="#E8E8E8" fill-rule="nonzero">
              <path d="M54.0888672,44.2789912 C56.1064453,44.7343558 56.8219819,45.5691478 58.2626363,46.7136733 C60.3227722,48.3538407 61.3000161,50.7171184 62.5605887,52.8840548 C66.5968222,59.8278291 70.5826328,66.7907586 74.6020587,73.7393216 C74.7605307,74.0170726 74.8973929,74.5007424 75.3536001,74.3546837 C75.7425768,74.232569 75.5288797,73.8015761 75.5745004,73.5118532 C75.9346704,71.0048595 77.3955873,68.7879917 79.560311,67.4635863 C83.5965445,64.877629 90.2019451,66.2663839 92.8239362,71.3185782 C93.0376332,71.7328103 93.2057096,72.1877472 93.7699659,72.5157807 C94.4710844,68.0909204 96.6128573,64.8034025 101.282979,64.2071957 C106.930344,63.4888742 110.279866,66.728504 112.582512,71.5197083 C112.844231,69.7239046 113.26202,68.0669764 114.212852,66.6255446 C116.746003,62.7944968 121.437734,62.0043431 125.322699,63.6445105 C127.742999,64.664527 129.282098,66.5177964 130.561879,68.7517762 C136.999203,80.0054793 143.506159,91.2304495 149.984302,102.467392 C151.869158,105.73336 154.078162,108.836509 155.326729,112.432905 C158.304081,121.009663 157.353249,129.102752 152.111668,136.587662 C150.241219,139.257423 147.69126,141.189708 144.874781,142.813115 C138.631945,146.404722 132.389109,150.046612 126.146273,153.61667 C120.731814,156.703058 115.053234,156.461223 109.300221,154.761195 C104.349172,153.298214 99.8615331,150.769722 95.2034171,148.631519 C83.5341162,143.275235 71.6415138,138.440931 59.7993344,133.489302 C53.6429378,130.915317 51.2010285,123.523789 54.8218733,118.356663 C57.2373706,114.911114 61.960316,113.74025 65.8020612,115.483377 C70.8323463,117.767639 75.9178564,119.929787 80.9793556,122.147006 C81.1234211,122.20926 81.2578822,122.31222 81.4595738,122.147006 C77.5457959,115.385206 73.6304173,108.618618 69.713438,101.847241 C61.4568874,87.6021279 53.198736,73.3594094 44.9389839,59.1190852 C44.305096,58.0248422 43.9521356,56.8180621 43.3758739,55.7046638 C42.8747087,53.8242578 42.8747087,51.9551878 43.3758739,50.0974538 C44.1276216,47.3108529 45.7793094,46.1130144 47.180102,45.060318 C49.3335802,43.8236266 52.0712891,43.8236266 54.0888672,44.2789912 Z" id="hand"></path>
            </g>
          </svg>
        </div>
        <div class="swipe-text">Swipe up for fullscreen</div>
      </div>
    </div>
    
    <!-- iOS fullscreen overlay -->
    <div id="iOSFullscreen" class="hidden"></div>
    
    <script>
      // Set up canvas for proper display
      const canvas = document.getElementById('game-canvas');
      
      // Let the game engine handle the resizing
      // Just ensure we notify the game when important events happen
      function notifyGameOfResize() {
        if (window.dispatchEvent) {
          window.dispatchEvent(new Event('resize'));
        }
      }
      
      // Add essential event listeners
      window.addEventListener('resize', notifyGameOfResize);
      window.addEventListener('orientationchange', notifyGameOfResize);
      window.addEventListener('fullscreenchange', notifyGameOfResize);
      // Add Core sound stubs to fix console errors
      window.Core = window.Core || {};
      window.Core.sounds = window.Core.sounds || {
        getSoundCurrentTime: function(id) { return 0; },
        getSoundCurrentVolume: function(id) { return 0; }
      };
      
      // Prevent scrolling on mobile devices
      document.addEventListener('touchmove', function(e) {
        e.preventDefault();
      }, { passive: false });
      
      // Handle visibility change for iframe pause/resume
      document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
          // Game is hidden, dispatch pause event if needed
          if (window.dispatchEvent) {
            window.dispatchEvent(new CustomEvent('game-pause'));
          }
        } else {
          // Game is visible again, dispatch resume event if needed
          if (window.dispatchEvent) {
            window.dispatchEvent(new CustomEvent('game-resume'));
          }
        }
      });
    </script>
  </body>
</html>
